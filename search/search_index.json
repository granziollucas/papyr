{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Papyr Documentation \u00b6 Welcome to Papyr. This documentation is the detailed reference for running the CLI, configuring providers, and understanding outputs. Contents \u00b6 quickstart.md Get up and running with a first search. cli_reference.md Full command list and prompt descriptions. providers.md Provider setup, capabilities, and limitations. data_schema.md CSV column definitions and RIS mapping. resumability.md Pause/resume and incremental behavior. troubleshooting.md Common issues and fixes. dev_notes.md Internal developer notes. adr/ Architecture decision records. Conventions \u00b6 All user-facing strings are en-US. Examples use Windows-friendly paths, but commands are cross-platform. Unless stated otherwise, all output files are created under the chosen output directory.","title":"Home"},{"location":"#papyr-documentation","text":"Welcome to Papyr. This documentation is the detailed reference for running the CLI, configuring providers, and understanding outputs.","title":"Papyr Documentation"},{"location":"#contents","text":"quickstart.md Get up and running with a first search. cli_reference.md Full command list and prompt descriptions. providers.md Provider setup, capabilities, and limitations. data_schema.md CSV column definitions and RIS mapping. resumability.md Pause/resume and incremental behavior. troubleshooting.md Common issues and fixes. dev_notes.md Internal developer notes. adr/ Architecture decision records.","title":"Contents"},{"location":"#conventions","text":"All user-facing strings are en-US. Examples use Windows-friendly paths, but commands are cross-platform. Unless stated otherwise, all output files are created under the chosen output directory.","title":"Conventions"},{"location":"cli_reference/","text":"CLI Reference \u00b6 papyr init \u00b6 Runs the credential setup wizard and provider checks. Steps: - Crossref polite email - SSRN opt-in (disabled by default) papyr new \u00b6 Starts the interactive search wizard. Prompts: - Keywords (required) - Year range (optional) - Publication types (optional) - Search fields (optional) - Language codes or names (optional) - Access filter: open / closed / both - Sort order (best-effort) - Result limit (optional) - Download PDFs (yes/no) - Output directory - Dry-run (yes/no) During runs: - A .papyr_control file in the output folder can pause/resume/stop. papyr resume \u00b6 Resumes a prior search. You must pass the path to search_params.json . papyr config show \u00b6 Shows current config with secrets redacted. papyr config init \u00b6 Creates a .env template. papyr doctor \u00b6 Validates environment, credentials, and connectivity (best-effort). papyr reset-cache \u00b6 Resets local cache/state for a run (asks for confirmation). papyr export ris \u00b6 Generates results.ris from the current CSV.","title":"CLI Reference"},{"location":"cli_reference/#cli-reference","text":"","title":"CLI Reference"},{"location":"cli_reference/#papyr-init","text":"Runs the credential setup wizard and provider checks. Steps: - Crossref polite email - SSRN opt-in (disabled by default)","title":"papyr init"},{"location":"cli_reference/#papyr-new","text":"Starts the interactive search wizard. Prompts: - Keywords (required) - Year range (optional) - Publication types (optional) - Search fields (optional) - Language codes or names (optional) - Access filter: open / closed / both - Sort order (best-effort) - Result limit (optional) - Download PDFs (yes/no) - Output directory - Dry-run (yes/no) During runs: - A .papyr_control file in the output folder can pause/resume/stop.","title":"papyr new"},{"location":"cli_reference/#papyr-resume","text":"Resumes a prior search. You must pass the path to search_params.json .","title":"papyr resume"},{"location":"cli_reference/#papyr-config-show","text":"Shows current config with secrets redacted.","title":"papyr config show"},{"location":"cli_reference/#papyr-config-init","text":"Creates a .env template.","title":"papyr config init"},{"location":"cli_reference/#papyr-doctor","text":"Validates environment, credentials, and connectivity (best-effort).","title":"papyr doctor"},{"location":"cli_reference/#papyr-reset-cache","text":"Resets local cache/state for a run (asks for confirmation).","title":"papyr reset-cache"},{"location":"cli_reference/#papyr-export-ris","text":"Generates results.ris from the current CSV.","title":"papyr export ris"},{"location":"data_schema/","text":"Data Schema \u00b6 Papyr exports a CSV with fixed columns. Columns are always present even if blank. CSV Columns \u00b6 Authors: \"Surname, N.; Surname, N.; ...\" Title Abstract Origin: provider name Volume Issue Pages Publisher Month Year Type: paper/preprint/book_chapter/etc. Keywords Citations OA: true/false/unknown ID: DOI/arXiv/SSRN id URL: official landing page License RetrievedAt: ISO timestamp QueryHash: stable hash of search parameters DuplicateOf: if deduped Encoding and delimiter \u00b6 Comma-separated Latin1 encoding for Excel compatibility Proper quoting and escaping for commas/newlines RIS Mapping (best-effort) \u00b6 TY: derived from Type AU: Authors TI: Title PY: Year PB: Publisher UR: URL AB: Abstract DO: ID Deduplication \u00b6 Titles are normalized (casefold, strip punctuation, collapse whitespace) Duplicates require matching title and ID Crossref is canonical when duplicates are found","title":"Data Schema"},{"location":"data_schema/#data-schema","text":"Papyr exports a CSV with fixed columns. Columns are always present even if blank.","title":"Data Schema"},{"location":"data_schema/#csv-columns","text":"Authors: \"Surname, N.; Surname, N.; ...\" Title Abstract Origin: provider name Volume Issue Pages Publisher Month Year Type: paper/preprint/book_chapter/etc. Keywords Citations OA: true/false/unknown ID: DOI/arXiv/SSRN id URL: official landing page License RetrievedAt: ISO timestamp QueryHash: stable hash of search parameters DuplicateOf: if deduped","title":"CSV Columns"},{"location":"data_schema/#encoding-and-delimiter","text":"Comma-separated Latin1 encoding for Excel compatibility Proper quoting and escaping for commas/newlines","title":"Encoding and delimiter"},{"location":"data_schema/#ris-mapping-best-effort","text":"TY: derived from Type AU: Authors TI: Title PY: Year PB: Publisher UR: URL AB: Abstract DO: ID","title":"RIS Mapping (best-effort)"},{"location":"data_schema/#deduplication","text":"Titles are normalized (casefold, strip punctuation, collapse whitespace) Duplicates require matching title and ID Crossref is canonical when duplicates are found","title":"Deduplication"},{"location":"dev_notes/","text":"Dev Notes \u00b6 Architecture summary \u00b6 Provider adapters fetch raw records from external sources. Core pipeline normalizes, deduplicates, persists to SQLite, and exports CSV/RIS. State lives in state.sqlite inside the run folder. Key modules \u00b6 src/papyr/cli : CLI entrypoints and wizard prompts src/papyr/core : models, pipeline, normalization, dedup, export, downloader src/papyr/adapters : provider integrations src/papyr/util : filesystem, hashing, logging, time, config How to add a new provider \u00b6 1) Implement a Provider adapter in src/papyr/adapters/ . 2) Add it to default_providers() . 3) Update docs/providers.md with setup and limitations. 4) Add tests for normalization and basic search behavior. Assumptions \u00b6 SSRN access requires explicit permission and is disabled by default. Requests are sequential and rate-limited; no parallelism. Errors should not crash a run except for invalid output directory or SQLite failures. Known limitations \u00b6 SSRN adapter is not implemented unless authorized access is provided. Pause/resume uses a control file instead of keyboard hooks. Provider-specific filters are best-effort and may be ignored by some APIs.","title":"Dev Notes"},{"location":"dev_notes/#dev-notes","text":"","title":"Dev Notes"},{"location":"dev_notes/#architecture-summary","text":"Provider adapters fetch raw records from external sources. Core pipeline normalizes, deduplicates, persists to SQLite, and exports CSV/RIS. State lives in state.sqlite inside the run folder.","title":"Architecture summary"},{"location":"dev_notes/#key-modules","text":"src/papyr/cli : CLI entrypoints and wizard prompts src/papyr/core : models, pipeline, normalization, dedup, export, downloader src/papyr/adapters : provider integrations src/papyr/util : filesystem, hashing, logging, time, config","title":"Key modules"},{"location":"dev_notes/#how-to-add-a-new-provider","text":"1) Implement a Provider adapter in src/papyr/adapters/ . 2) Add it to default_providers() . 3) Update docs/providers.md with setup and limitations. 4) Add tests for normalization and basic search behavior.","title":"How to add a new provider"},{"location":"dev_notes/#assumptions","text":"SSRN access requires explicit permission and is disabled by default. Requests are sequential and rate-limited; no parallelism. Errors should not crash a run except for invalid output directory or SQLite failures.","title":"Assumptions"},{"location":"dev_notes/#known-limitations","text":"SSRN adapter is not implemented unless authorized access is provided. Pause/resume uses a control file instead of keyboard hooks. Provider-specific filters are best-effort and may be ignored by some APIs.","title":"Known limitations"},{"location":"providers/","text":"Providers \u00b6 Papyr v1 supports Crossref, arXiv, and SSRN. Providers are queried sequentially with conservative rate limits. Crossref \u00b6 Setup \u00b6 Required: contact email for polite requests. Optional: user agent string. Environment keys: - CROSSREF_ENABLED (1 or 0) - CROSSREF_EMAIL - CROSSREF_USER_AGENT Capabilities \u00b6 Keyword search Year filter (from/until) Type filter (best-effort) Notes \u00b6 Uses Crossref API mailto parameter. If skipped, Crossref is disabled but will be prompted on each new search. arXiv \u00b6 Setup \u00b6 No credentials required. Capabilities \u00b6 Keyword search via arXiv API. Notes \u00b6 Results are treated as preprints. SSRN (disabled by default) \u00b6 Setup \u00b6 SSRN access is disabled unless you explicitly opt in. You must have explicit permission or approved API/feed access from SSRN. Environment keys: - SSRN_ENABLED (1 or 0) - SSRN_FEED_URL Notes \u00b6 Do not enable SSRN unless SSRN terms explicitly allow your access method. Papyr will not bypass paywalls or scrape SSRN without permission.","title":"Providers"},{"location":"providers/#providers","text":"Papyr v1 supports Crossref, arXiv, and SSRN. Providers are queried sequentially with conservative rate limits.","title":"Providers"},{"location":"providers/#crossref","text":"","title":"Crossref"},{"location":"providers/#setup","text":"Required: contact email for polite requests. Optional: user agent string. Environment keys: - CROSSREF_ENABLED (1 or 0) - CROSSREF_EMAIL - CROSSREF_USER_AGENT","title":"Setup"},{"location":"providers/#capabilities","text":"Keyword search Year filter (from/until) Type filter (best-effort)","title":"Capabilities"},{"location":"providers/#notes","text":"Uses Crossref API mailto parameter. If skipped, Crossref is disabled but will be prompted on each new search.","title":"Notes"},{"location":"providers/#arxiv","text":"","title":"arXiv"},{"location":"providers/#setup_1","text":"No credentials required.","title":"Setup"},{"location":"providers/#capabilities_1","text":"Keyword search via arXiv API.","title":"Capabilities"},{"location":"providers/#notes_1","text":"Results are treated as preprints.","title":"Notes"},{"location":"providers/#ssrn-disabled-by-default","text":"","title":"SSRN (disabled by default)"},{"location":"providers/#setup_2","text":"SSRN access is disabled unless you explicitly opt in. You must have explicit permission or approved API/feed access from SSRN. Environment keys: - SSRN_ENABLED (1 or 0) - SSRN_FEED_URL","title":"Setup"},{"location":"providers/#notes_2","text":"Do not enable SSRN unless SSRN terms explicitly allow your access method. Papyr will not bypass paywalls or scrape SSRN without permission.","title":"Notes"},{"location":"quickstart/","text":"Quickstart \u00b6 This guide walks through a minimal run. 1) Initialize providers \u00b6 Run the setup wizard to store provider settings. papyr init Notes: - Crossref requires a contact email (polite requests). - SSRN is disabled by default unless you explicitly enable it. 2) Start a new search \u00b6 papyr new You will be prompted for: - Keywords - Year range (optional) - Publication types (optional) - Search fields (optional) - Languages (optional) - Access filter (open/closed/both) - Sort order - Limit (optional) - Download PDFs (yes/no) - Output directory - Dry-run (yes/no) 3) Resume a search \u00b6 papyr resume <path to search_params.json> 4) Export RIS (optional) \u00b6 papyr export ris Run folder layout \u00b6 <output_dir>/ search_params.json results.csv results.ris state.sqlite logs/ run_<timestamp>.log duplicates_<timestamp>.csv errors_<timestamp>.jsonl files/ <sanitized_title>_<shortid>.pdf Pause/resume/stop control \u00b6 Create a file named .papyr_control in the output directory with one of: - PAUSE - RESUME - STOP Papyr will poll this file during the run.","title":"Quickstart"},{"location":"quickstart/#quickstart","text":"This guide walks through a minimal run.","title":"Quickstart"},{"location":"quickstart/#1-initialize-providers","text":"Run the setup wizard to store provider settings. papyr init Notes: - Crossref requires a contact email (polite requests). - SSRN is disabled by default unless you explicitly enable it.","title":"1) Initialize providers"},{"location":"quickstart/#2-start-a-new-search","text":"papyr new You will be prompted for: - Keywords - Year range (optional) - Publication types (optional) - Search fields (optional) - Languages (optional) - Access filter (open/closed/both) - Sort order - Limit (optional) - Download PDFs (yes/no) - Output directory - Dry-run (yes/no)","title":"2) Start a new search"},{"location":"quickstart/#3-resume-a-search","text":"papyr resume <path to search_params.json>","title":"3) Resume a search"},{"location":"quickstart/#4-export-ris-optional","text":"papyr export ris","title":"4) Export RIS (optional)"},{"location":"quickstart/#run-folder-layout","text":"<output_dir>/ search_params.json results.csv results.ris state.sqlite logs/ run_<timestamp>.log duplicates_<timestamp>.csv errors_<timestamp>.jsonl files/ <sanitized_title>_<shortid>.pdf","title":"Run folder layout"},{"location":"quickstart/#pauseresumestop-control","text":"Create a file named .papyr_control in the output directory with one of: - PAUSE - RESUME - STOP Papyr will poll this file during the run.","title":"Pause/resume/stop control"},{"location":"resumability/","text":"Resumability \u00b6 Papyr uses SQLite ( state.sqlite ) to persist everything needed for resume and incremental runs. Stored state \u00b6 Search parameters Provider pagination cursors Raw and normalized records Download status Failures Resume flow \u00b6 1) Run papyr resume <path to search_params.json> 2) Papyr loads the run folder from that path 3) Provider cursors are read from SQLite and the run continues Incremental runs \u00b6 Re-running a search in the same output folder reuses the QueryHash Already seen record IDs are skipped results.csv is re-exported deterministically from all stored records Pause/resume/stop \u00b6 Create .papyr_control in the output directory Write one of: PAUSE, RESUME, STOP Papyr polls the file during the run","title":"Resumability"},{"location":"resumability/#resumability","text":"Papyr uses SQLite ( state.sqlite ) to persist everything needed for resume and incremental runs.","title":"Resumability"},{"location":"resumability/#stored-state","text":"Search parameters Provider pagination cursors Raw and normalized records Download status Failures","title":"Stored state"},{"location":"resumability/#resume-flow","text":"1) Run papyr resume <path to search_params.json> 2) Papyr loads the run folder from that path 3) Provider cursors are read from SQLite and the run continues","title":"Resume flow"},{"location":"resumability/#incremental-runs","text":"Re-running a search in the same output folder reuses the QueryHash Already seen record IDs are skipped results.csv is re-exported deterministically from all stored records","title":"Incremental runs"},{"location":"resumability/#pauseresumestop","text":"Create .papyr_control in the output directory Write one of: PAUSE, RESUME, STOP Papyr polls the file during the run","title":"Pause/resume/stop"},{"location":"troubleshooting/","text":"Troubleshooting \u00b6 \"An error occurred. Please check the log\" \u00b6 Check the latest file under logs/run_<timestamp>.log . Crossref disabled \u00b6 If you skipped Crossref polite setup, it will be disabled. Run papyr init to configure it. SSRN disabled \u00b6 SSRN is disabled by default. Only enable if you have explicit permission. No results \u00b6 Try broader keywords Remove filters Increase limit Downloads fail \u00b6 Papyr only downloads legitimate PDFs. Check that the record has an official PDF URL. Control file not working \u00b6 Ensure .papyr_control is in the output directory Commands are case-insensitive: PAUSE/RESUME/STOP","title":"Troubleshooting"},{"location":"troubleshooting/#troubleshooting","text":"","title":"Troubleshooting"},{"location":"troubleshooting/#an-error-occurred-please-check-the-log","text":"Check the latest file under logs/run_<timestamp>.log .","title":"\"An error occurred. Please check the log\""},{"location":"troubleshooting/#crossref-disabled","text":"If you skipped Crossref polite setup, it will be disabled. Run papyr init to configure it.","title":"Crossref disabled"},{"location":"troubleshooting/#ssrn-disabled","text":"SSRN is disabled by default. Only enable if you have explicit permission.","title":"SSRN disabled"},{"location":"troubleshooting/#no-results","text":"Try broader keywords Remove filters Increase limit","title":"No results"},{"location":"troubleshooting/#downloads-fail","text":"Papyr only downloads legitimate PDFs. Check that the record has an official PDF URL.","title":"Downloads fail"},{"location":"troubleshooting/#control-file-not-working","text":"Ensure .papyr_control is in the output directory Commands are case-insensitive: PAUSE/RESUME/STOP","title":"Control file not working"},{"location":"adr/0001-architecture/","text":"Context - Papyr must support multiple providers with different APIs and be extensible. - The CLI needs stable core logic for normalization, deduplication, and persistence. Decision - Use a layered architecture with provider adapters and a domain core. - Providers implement a common interface and emit RawRecord objects. - Core pipeline normalizes, deduplicates, persists to SQLite, and exports CSV/RIS. Alternatives considered - Monolithic provider-specific pipelines. - Provider-specific output formats instead of a shared core model. Consequences / trade-offs - Additional abstraction requires more upfront structure. - Easier to add providers and keep output consistent.","title":"Layered architecture (adapters + core)"},{"location":"adr/0002-state-sqlite/","text":"Context - Papyr requires resumable, incremental searches with reliable local state. - State must be cross-platform and easy to inspect or back up. Decision - Use SQLite (state.sqlite) in the run folder as the single state store. - Store runs, provider state cursors, raw + normalized records, downloads, and failures. Alternatives considered - JSON files per provider with incremental checkpoints. - Embedded key-value stores (e.g., sqlite alternatives). Consequences / trade-offs - Requires schema management and migration strategy in future versions. - Provides robustness, queryability, and atomic writes for resumability.","title":"SQLite for resumable state"},{"location":"adr/0003-control-file-pause/","text":"Context - Cross-platform keyboard capture is unreliable. - Papyr requires pause, resume, and stop controls during long searches. Decision - Use a control file .papyr_control in the run folder. - Commands: PAUSE, RESUME, STOP. Alternatives considered - Global keyboard hooks (OS-specific and brittle). - TCP control socket (adds complexity and firewall issues). Consequences / trade-offs - User must create/edit a file to control runs. - Simple and reliable across platforms.","title":"Control-file pause/resume mechanism"},{"location":"adr/0004-docs-site/","text":"Context - GitHub Markdown pages are readable but lack navigation and search. - A lightweight docs site is useful for users and contributors. Decision - Use MkDocs with the default theme. - Source files live in docs/ and are published via mkdocs build . Alternatives considered - Docusaurus (richer but heavier and React-based). - Sphinx (powerful but more complex for this project). Consequences / trade-offs - Adds a documentation build dependency. - Simple static site with minimal configuration.","title":"MkDocs for documentation site"}]}